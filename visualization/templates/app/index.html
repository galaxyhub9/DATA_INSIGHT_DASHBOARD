<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Visualization Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <script src="{% static 'js/indexscript.js' %}" defer></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-dark navbar-expand-lg px-5">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img
          src="{% static 'images/logo.jpg' %}"
          alt="Company Logo"
          height="40"
          class="mr-2"
        />
      </a>

      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <!-- Container -->
        <div class="container mt-4">
          <!-- Filters Section -->
          <div class="row mb-4" id="filterSection">
            <div class="col-md-2">
              <select class="form-control custom-select" id="mainPestleFilter">
                <option value="">Select Pestle</option>
              </select>
            </div>
            <div class="col-md-2">
              <select class="form-control custom-select" id="regionFilter">
                <option value="">Select Region</option>
              </select>
            </div>
            <div class="col-md-2">
              <select class="form-control custom-select" id="countryFilter">
                <option value="">Select Country</option>
              </select>
            </div>
            <div class="col-md-2">
              <input
                type="number"
                class="form-control"
                id="intensityFilter"
                placeholder="Intensity (1-20)"
              />
            </div>
            <div class="col-md-2">
              <input
                type="number"
                class="form-control"
                id="mainRelveanceFilter"
                placeholder="Relevance (1-6)"
              />
            </div>
          </div>
        </div>

        <!-- Demo Account Section -->
        <div class="d-flex align-items-center">
          <button id="theme-toggle" class="btn mx-3">ðŸŒ™</button>
          <img
            src="{% static 'images/profile.jpg' %}"
            alt="Profile"
            class="rounded-circle"
            width="40"
            height="40"
          />
          <span class="text-white ml-2">Madhuri</span>
        </div>
      </div>
    </nav>

    <!-- Add a container div for the dashboard layout -->
    <div class="dashboard-layout">
      <div class="dashboard-insight">
        <div class="card-insight">
          <div class="card-header">
            <h4>
              Top Insight for <span id="selectedCountry">Default Country</span>
            </h4>
          </div>
          <div class="card-body">
            <p id="topInsightText">Loading insight...</p>
          </div>
        </div>
      </div>
      <div class="dashboard-left">
        <div class="card">
          <div class="card-header">
            <h4>
              Top <span id="countryCount">5</span> Countries in
              <span id="selectedSector">Energy</span> Sector
            </h4>
            <div class="sector-dropdown">
              <button id="sectorToggle">â–¼</button>
              <div id="sectorMenu" class="sector-menu">
                <ul>
                  <li onclick="setSector('Energy')">Energy</li>
                  <li onclick="setSector('Environment')">Environment</li>
                  <li onclick="setSector('Government')">Government</li>
                  <li onclick="setSector('Aerospace & defence')">
                    Aerospace & defence
                  </li>
                  <li onclick="setSector('Manufacturing')">Manufacturing</li>
                  <li onclick="setSector('Retail')">Retail</li>
                  <li onclick="setSector('Financial services')">
                    Financial services
                  </li>
                  <li onclick="setSector('Support services')">
                    Support services
                  </li>
                  <li onclick="setSector('Information Technology')">
                    Information Technology
                  </li>
                  <li onclick="setSector('Food & agriculture')">
                    Food & agriculture
                  </li>
                  <li onclick="setSector('Construction')">Construction</li>
                  <li onclick="setSector('Transport')">Transport</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="chart-container">
              <canvas id="countryChart"></canvas>
              <div id="countryLegend" class="legend-container"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="trend-card">
        <div class="card">
          <div class="card-header">
            <h4>Trending Topics Over Years</h4>
            <p
              id="selectedCountryText2"
              style="color: #999; font-size: 16px; margin: 5px 0 0">
              India
            </p>
          </div>
          <div class="card-body">
            <canvas id="trendingTopicsChart"></canvas>
          </div>
        </div>
      </div>

      <div class="table-container">
        <h4>ARTICLES</h4>

        <table class="table">
          <thead>
            <tr>
              <th>Title</th>
              <th>Source</th>
              <th>Date</th>
              <th>Region</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>

        <div class="d-flex justify-content-center">
          <button class="btn btn-primary" id="loadMoreButton">Next</button>
        </div>
      </div>
     

      <div class="fun-facts-card">
        <div class="card-header">
          <h4>FLASH NEWS!</h4>
        </div>
        <div id="funFactsList" class="fun-facts-list">
          <div class="fun-fact">Loading fun facts...</div>
        </div>
      </div>
    </div>

    <div class="card" id="cardsource">
      <div class="card-header">
        <h4>POPULAR SOURCES</h4>
        <p
          id="selectedCountryText"
          style="color: #999; font-size: 16px; margin: 5px 0 0"
        >
          India
        </p>
      </div>
      <div class="card-body">
        <canvas id="topSourcesChart"></canvas>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-5 text-center">
      <p>&copy; 2025 Data Insights Dashboard. All rights reserved.</p>
    </footer>

    <!-- Bootstrap JS & JQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    </body>
</html>